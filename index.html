<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Halit Evin AI | Next Gen</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chat-area {
            height: calc(100vh - 180px);
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        .bubble {
            max-width: 85%;
            padding: 1rem 1.25rem;
            border-radius: 1.5rem;
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 0.5rem;
        }

        .ai-bubble {
            background: rgba(51, 65, 85, 0.5);
            color: #f1f5f9;
            border-bottom-left-radius: 0.25rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .user-bubble {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 0.25rem;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }

        .typing-indicator span {
            width: 4px;
            height: 4px;
            background-color: #3b82f6;
            border-radius: 50%;
            display: inline-block;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

        .error-overlay {
            background: rgba(220, 38, 38, 0.1);
            border: 1px solid rgba(220, 38, 38, 0.2);
            color: #fca5a5;
            padding: 0.75rem;
            border-radius: 0.75rem;
            font-size: 0.8rem;
            margin: 1rem;
        }
    </style>
</head>
<body class="flex flex-col h-screen">

    <!-- Header -->
    <header class="glass-panel px-6 py-4 flex justify-between items-center sticky top-0 z-50">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-500/20">
                <i class="fas fa-bolt"></i>
            </div>
            <div>
                <h1 class="font-bold text-lg tracking-tight">Halit Evin <span class="text-blue-500">AI</span></h1>
                <div class="flex items-center gap-1.5">
                    <span class="w-2 h-2 bg-blue-400 rounded-full animate-pulse"></span>
                    <span class="text-[10px] font-bold text-blue-400 uppercase tracking-widest">Gemini 2.0 Next Gen</span>
                </div>
            </div>
        </div>
        <button onclick="location.reload()" class="w-10 h-10 rounded-full hover:bg-white/10 flex items-center justify-center transition">
            <i class="fas fa-sync-alt text-slate-400"></i>
        </button>
    </header>

    <div id="error-console" class="hidden error-overlay"></div>

    <!-- Chat -->
    <main id="chat-window" class="flex-1 chat-area p-4 flex flex-col gap-4">
        <div class="bubble ai-bubble">
            Merhaba,ben halit evin ai . Google Arama yeteneğimle her türlü güncel bilgiye ulaşabilirim.
        </div>
    </main>

    <!-- Search/Typing Loading -->
    <div id="status-bar" class="hidden px-8 py-2">
        <div class="flex items-center gap-3">
            <div class="typing-indicator flex gap-1">
                <span></span><span></span><span></span>
            </div>
            <span class="text-[11px] font-bold text-blue-400 uppercase tracking-tighter">Google Üzerinde Arama Yapılıyor...</span>
        </div>
    </div>

    <!-- Footer Input -->
    <footer class="p-4 glass-panel border-t border-white/5">
        <div class="max-w-4xl mx-auto flex gap-3 items-center">
            <input type="text" id="prompt-input" 
                   placeholder="Bugünün teknoloji haberleri neler?.." 
                   class="flex-1 bg-white/5 border border-white/10 rounded-2xl py-4 px-6 outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white/10 transition-all text-white placeholder:text-slate-500">
            <button id="submit-btn" class="bg-blue-600 text-white w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg hover:bg-blue-500 active:scale-90 transition-all">
                <i class="fas fa-arrow-up text-xl"></i>
            </button>
        </div>
    </footer>

    <script>
        // --- API ANAHTARINIZ ---
        const apiKey = "AIzaSyDw6d4UB2Fa0lAIV1UWPYCV3YO0eR74Kr4"; 

        const chatWindow = document.getElementById('chat-window');
        const promptInput = document.getElementById('prompt-input');
        const submitBtn = document.getElementById('submit-btn');
        const statusBar = document.getElementById('status-bar');
        const errorConsole = document.getElementById('error-console');

        async function sendMessage() {
            const message = promptInput.value.trim();
            if (!message) return;

            addMessage('user', message);
            promptInput.value = '';
            statusBar.classList.remove('hidden');
            errorConsole.classList.add('hidden');
            chatWindow.scrollTop = chatWindow.scrollHeight;

            if (!apiKey) {
                setTimeout(() => {
                    addMessage('ai', "Hata: API anahtarı girilmemiş. Lütfen Google AI Studio'dan aldığınız anahtarı koda ekleyin.");
                    statusBar.classList.add('hidden');
                }, 1000);
                return;
            }

            try {
                // En güncel model Gemini 2.0 Flash
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: message }] }],
                        tools: [{ "google_search": {} }],
                        systemInstruction: { 
                            parts: [{ text: "Adın Halit Evin AI. Gemini 2.0 modelisin. Her zaman en güncel bilgiyi vermek için Google Search kullan. Cevaplarını Türkçe ve samimi bir dille ver. Sen Halit Evin Aİ’sin.
Türkçe konuşan, kibar, aile dostu, sade anlatan, ev yaşamına yardımcı bir yapay zekâsın.
Tıbbi teşhis vermezsin." }] 
                        }
                    })
                });

                const data = await response.json();

                if (data.error) {
                    throw new Error(data.error.message);
                }

                const aiResponse = data.candidates?.[0]?.content?.parts?.[0]?.text || "Maalesef cevap oluşturulamadı.";
                const sources = data.candidates?.[0]?.groundingMetadata?.groundingAttributions || [];
                
                addMessage('ai', aiResponse, sources);

            } catch (err) {
                errorConsole.innerText = "Sistem Hatası: " + err.message;
                errorConsole.classList.remove('hidden');
                addMessage('ai', "Şu an bir teknik aksaklık yaşıyorum. Lütfen API anahtarınızı veya internet bağlantınızı kontrol edin.");
            } finally {
                statusBar.classList.add('hidden');
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }
        }

        function addMessage(role, text, sources = []) {
            const container = document.createElement('div');
            container.className = `flex flex-col ${role === 'user' ? 'items-end' : 'items-start'} mb-2`;
            
            const bubble = document.createElement('div');
            bubble.className = `bubble ${role === 'user' ? 'user-bubble' : 'ai-bubble'}`;
            bubble.innerText = text;
            
            container.appendChild(bubble);

            if (sources.length > 0) {
                const sWrap = document.createElement('div');
                sWrap.className = "flex flex-wrap gap-2 mt-1 px-2";
                sources.forEach(s => {
                    if (s.web) {
                        const a = document.createElement('a');
                        a.href = s.web.uri;
                        a.target = "_blank";
                        a.className = "text-[10px] text-blue-400 hover:underline bg-blue-400/10 px-2 py-1 rounded";
                        a.innerText = "Kaynak: " + s.web.title.substring(0, 20);
                        sWrap.appendChild(a);
                    }
                });
                container.appendChild(sWrap);
            }

            chatWindow.appendChild(container);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        submitBtn.addEventListener('click', sendMessage);
        promptInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') sendMessage(); });
    </script>
</body>
</html>












